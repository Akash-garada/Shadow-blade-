<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Shadow Blade</title>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
<style>
body { margin:0; padding:0; overflow:hidden; background:black; }
#mobileControls {
  position:absolute;
  bottom:20px;
  width:100%;
  text-align:center;
}
.btn {
  width:60px;
  height:60px;
  margin:10px;
  background:#222;
  color:white;
  font-size:24px;
  border-radius:50%;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  user-select:none;
}
</style>
</head>
<body>

<div id="mobileControls">
  <div class="btn" id="left">◀</div>
  <div class="btn" id="right">▶</div>
  <div class="btn" id="jump">⤒</div>
</div>

<script>
const config = {
  type: Phaser.AUTO,
  width: window.innerWidth,
  height: window.innerHeight,
  physics: {
    default: 'arcade',
    arcade: { gravity: { y: 800 }, debug: false }
  },
  scene: { preload, create, update }
};

const game = new Phaser.Game(config);

let player, cursors, platforms;
let moveLeft = false;
let moveRight = false;
let jumpPressed = false;

function preload() {
  this.load.image('ground', 'https://labs.phaser.io/assets/sprites/platform.png');
  this.load.image('player', 'https://labs.phaser.io/assets/sprites/phaser-dude.png');
}

function create() {
  platforms = this.physics.add.staticGroup();
  platforms.create(config.width/2, config.height-20, 'ground')
    .setScale(3).refreshBody();

  player = this.physics.add.sprite(100, config.height-100, 'player');
  player.setBounce(0.2);
  player.setCollideWorldBounds(true);

  this.physics.add.collider(player, platforms);

  cursors = this.input.keyboard.createCursorKeys();

  // Mobile controls
  document.getElementById("left").ontouchstart = () => moveLeft = true;
  document.getElementById("left").ontouchend = () => moveLeft = false;

  document.getElementById("right").ontouchstart = () => moveRight = true;
  document.getElementById("right").ontouchend = () => moveRight = false;

  document.getElementById("jump").ontouchstart = () => jumpPressed = true;
  document.getElementById("jump").ontouchend = () => jumpPressed = false;
}

function update() {
  player.setVelocityX(0);

  if (cursors.left.isDown || moveLeft) {
    player.setVelocityX(-200);
  }
  else if (cursors.right.isDown || moveRight) {
    player.setVelocityX(200);
  }

  if ((cursors.up.isDown || jumpPressed) && player.body.touching.down) {
    player.setVelocityY(-500);
  }
}
</script>

</body>
</html>
